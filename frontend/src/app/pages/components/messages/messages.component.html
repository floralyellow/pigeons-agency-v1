<div class="container" *ngIf="this.userList">
    <div class="columns is-multiline">
        <div class="column is-one-fifth">
            Attacker
        </div>
        <div class="column is-one-fifth">
            Defender
        </div>
        <div class="column is-two-fifths">
            Result
        </div>
        <div class="column is-one-fifth">
            Detail
        </div>
        <div class="column is-full card mb-3" [ngClass]="message.winner_id === user.id? 'has-background-success' : 'has-background-danger'" *ngFor="let message of messages">
            <div class="columns m-auto">
                <div class="column is-one-fifth">
                    <span *ngIf="message.attacker === user.id; else attackerName">You</span>
                    <ng-template #attackerName>{{getUser(message.attacker).username}}</ng-template>
                </div>
                <div class="column is-one-fifth">
                    <span *ngIf="message.defender === user.id; else defenderName">You</span>
                    <ng-template #defenderName>{{getUser(message.defender).username}}</ng-template>
                </div>
                <div class="column is-two-fifths">
                    <span *ngIf="message.winner_id === user.id; else winnerName">You won</span>
                    <ng-template #winnerName>{{getUser(message.winner_id).username}} won</ng-template>
                </div>
                <div class="column is-one-fifth">
                    <fa-icon class="is-clickable" [icon]="faEye" (click)="openModal(message.id)"></fa-icon>
                </div>
            </div>
        </div>
    </div>
    <app-modal
      [title]="modalTitle"
      [headerBackground]="modalHeaderBackground">
      <div class="columns is-multiline is-mobile has-text-centered" *ngIf="modal && attackResult">
        <div class="column is-two-fifths pigeons">
          Attacker (
            <span *ngIf="attackResult.attacker === user.id; else attackerName">You</span>
            <ng-template #attackerName>{{getUser(attackResult.attacker).username}}</ng-template>
          ) <br>
          <app-attack-pigeon *ngFor="let attackPigeon of attackPigeons" [pigeon]="attackPigeon"></app-attack-pigeon>
        </div>
        <div class="column is-size-4 is-one-fifths vs">
          {{attackResult.atk_tot_score}} VS {{attackResult.def_tot_score}}
        </div>
        <div class="column is-two-fifths pigeons">
          Defender (
            <span *ngIf="attackResult.defender === user.id; else defenderName">You</span>
            <ng-template #defenderName>{{getUser(attackResult.defender).username}}</ng-template>
          ) <br>
          <app-attack-pigeon *ngFor="let defendPigeon of defendPigeons" [pigeon]="defendPigeon"></app-attack-pigeon>
        </div>

        <div class="column is-half" *ngIf="attackResult">
          You<br>
          <fa-icon [icon]="faFistRaised"></fa-icon>
          {{attackResult.atk_tot_phys}}<br>
          <fa-icon [icon]="faHatWizard"></fa-icon>
          {{attackResult.atk_tot_magic}}<br>
          <fa-icon [icon]="faShieldAlt"></fa-icon>
          ({{attackResult.atk_shield_blocs}} block<span *ngIf="attackResult.atk_shield_blocs > 1">s</span>)
        </div>
        <div class="column is-half">
          Oponent<br>
          <fa-icon [icon]="faFistRaised"></fa-icon>
          {{attackResult.def_tot_phys}}<br>
          <fa-icon [icon]="faHatWizard"></fa-icon>
          {{attackResult.def_tot_magic}}<br>
          <fa-icon [icon]="faShieldAlt"></fa-icon>
          ({{attackResult.def_shield_blocs}} block<span *ngIf="attackResult.def_shield_blocs > 1">s</span>)
        </div>
      </div>
    </app-modal>
</div>